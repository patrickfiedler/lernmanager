{% extends 'base.html' %}

{% block title %}Admin Dashboard - Lernmanager{% endblock %}

{% block content %}
<h1 class="mb-2">ğŸ“Š Dashboard</h1>

<div class="grid grid-3">
    <div class="card">
        <div class="card-header">ğŸ“ Klassen</div>
        <p class="text-muted mb-1">{{ klassen|length }} Klasse(n)</p>
        <a href="{{ url_for('admin_klassen') }}" class="btn btn-primary">Verwalten</a>
    </div>

    <div class="card">
        <div class="card-header">ğŸ“ Aufgaben</div>
        <p class="text-muted mb-1">{{ tasks|length }} Aufgabe(n)</p>
        <a href="{{ url_for('admin_aufgaben') }}" class="btn btn-primary">Verwalten</a>
    </div>

    <div class="card">
        <div class="card-header">âš¡ Schnellzugriff</div>
        <div class="flex flex-column gap-1">
            <a href="{{ url_for('admin_klasse_neu') if false else url_for('admin_klassen') }}" class="btn btn-secondary">+ Neue Klasse</a>
            <a href="{{ url_for('admin_aufgabe_neu') }}" class="btn btn-secondary">+ Neue Aufgabe</a>
        </div>
    </div>
</div>

<div class="card mt-2">
    <div class="card-header">ğŸ“… Unterricht heute</div>
    {% if klassen_heute %}
    <div class="grid grid-2">
        {% for klasse in klassen_heute %}
        <a href="{{ url_for('admin_unterricht', klasse_id=klasse.id) }}" class="btn btn-secondary">
            {{ klasse.name }}
        </a>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-muted" style="padding: 1rem;">Keine Unterrichtsstunden heute geplant</p>
    {% endif %}
</div>

<div class="card mt-2">
    <div class="card-header">âš™ï¸ Systemeinstellungen</div>
    <form method="POST" action="{{ url_for('admin_update_settings') }}" style="padding: 1rem;">
        <meta name="csrf-token" content="{{ csrf_token() }}">
        <div class="flex flex-between flex-center">
            <div>
                <strong>Seitenaufrufe protokollieren</strong>
                <p class="text-muted" style="margin: 0.25rem 0 0 0; font-size: 0.875rem;">
                    Wenn deaktiviert, werden nur wichtige AktivitÃ¤ten protokolliert (Aufgaben, Quiz, Downloads).
                    Dies kann die Leistung leicht verbessern.
                </p>
            </div>
            <label class="toggle-switch">
                <input type="checkbox" name="log_page_views" {% if log_page_views %}checked{% endif %} onchange="this.form.submit()">
                <span class="toggle-slider"></span>
            </label>
        </div>
    </form>
</div>
{% endblock %}
